<audio id="bgMusic" loop>
    <source src="https://files.catbox.moe/v4ye8i.mp3" type="audio/mpeg">
</audio>
<audio id="openSound" preload="auto">
    <source src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3" type="audio/mpeg">
</audio>

<script>
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');
    const music = document.getElementById('bgMusic');
    const openSound = document.getElementById('openSound');
    let scale = 1;

    function revealValentine() {
        // Unlocking audio for browsers (plays a silent note so the browser allows sound later)
        openSound.play().then(() => {
            openSound.pause();
            openSound.currentTime = 0;
        }).catch(e => console.log("Audio waiting for interaction"));

        document.getElementById('fake404').style.setProperty('display', 'none', 'important');
        document.getElementById('mainCard').style.display = 'block';
        document.title = "For Hasina ❤️";
        setInterval(createPixelElement, 250);
    }

    // ... (Keep your createPixelElement and handleNo functions the same) ...

    function openLetter(num) {
        // Improved Sound Trigger
        if (openSound) {
            openSound.currentTime = 0;
            openSound.setAttribute('muted', 'false'); // Ensure it's not muted
            openSound.play().catch(error => console.log("Sound blocked by browser"));
        }

        document.querySelectorAll('.letter-content').forEach(letter => {
            if (letter.id !== `letter${num}`) letter.style.display = 'none';
        });
        const currentLetter = document.getElementById(`letter${num}`);
        currentLetter.style.display = (currentLetter.style.display === 'block') ? 'none' : 'block';
    }
</script>
